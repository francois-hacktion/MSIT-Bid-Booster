<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BidBooster — Pipeline AO</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            primary: '#0A66C2',
                            accent: '#00B389',
                            warning: '#F59E0B',
                            danger: '#EF4444',
                            dark: '#0F172A',
                            surface: '#F8FAFC'
                        }
                    },
                    fontFamily: {
                        display: ['Outfit', 'sans-serif'],
                        body: ['Plus Jakarta Sans', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: 'Outfit', sans-serif;
        }

        .sidebar-item {
            transition: all 0.2s ease;
        }

        .sidebar-item:hover,
        .sidebar-item.active {
            background: rgba(10, 102, 194, 0.1);
            border-left-color: #0A66C2;
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .filter-btn.active {
            background: #0A66C2;
            color: white;
        }

        .progress-bar {
            background: linear-gradient(90deg, #0A66C2 0%, #00B389 100%);
        }

        .tooltip {
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .tooltip-trigger:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>

<body class="bg-gray-50 text-brand-dark">

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-gray-200 fixed h-full">
            <div class="p-6">
                <a href="index.html" class="flex items-center gap-3">
                    <img src="logos/BidBooster.png" alt="BidBooster" class="h-10">
                </a>
            </div>

            <nav class="px-4 space-y-1">
                <a href="dashboard.html"
                    class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent cursor-pointer">
                    <i data-lucide="layout-dashboard" class="w-5 h-5 text-gray-500"></i>
                    <span class="font-medium text-gray-600">Dashboard</span>
                </a>
                <a href="pipeline.html"
                    class="sidebar-item active flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent cursor-pointer">
                    <i data-lucide="inbox" class="w-5 h-5 text-brand-primary"></i>
                    <span class="font-medium">Pipeline AO</span>
                    <span class="ml-auto bg-brand-primary text-white text-xs px-2 py-0.5 rounded-full">12</span>
                </a>
                <a href="#"
                    class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent cursor-pointer">
                    <i data-lucide="file-plus" class="w-5 h-5 text-gray-500"></i>
                    <span class="font-medium text-gray-600">Nouvel AO</span>
                </a>
                <a href="knowledge.html"
                    class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent cursor-pointer">
                    <i data-lucide="database" class="w-5 h-5 text-gray-500"></i>
                    <span class="font-medium text-gray-600">Base de Savoir</span>
                </a>
                <a href="analytics.html"
                    class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent cursor-pointer">
                    <i data-lucide="bar-chart-3" class="w-5 h-5 text-gray-500"></i>
                    <span class="font-medium text-gray-600">Analytics</span>
                </a>
            </nav>

            <!-- User Section -->
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-brand-primary/10 rounded-full flex items-center justify-center">
                        <span class="text-brand-primary font-semibold">JM</span>
                    </div>
                    <div class="flex-1">
                        <div class="font-medium text-sm">Julie Martin</div>
                        <div class="text-xs text-gray-500">Bid Manager</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 ml-64 p-8">
            <!-- Header -->
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h1 class="text-3xl font-bold">Pipeline Appels d'Offres</h1>
                    <p class="text-gray-500 mt-1">Gérez et suivez tous vos appels d'offres en cours</p>
                </div>
                <div class="flex items-center gap-4">
                    <button
                        class="bg-brand-primary text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-brand-primary/90 transition-colors flex items-center gap-2 cursor-pointer">
                        <i data-lucide="upload" class="w-5 h-5"></i>
                        Analyser un AO
                    </button>
                </div>
            </div>

            <!-- Filters & Search -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6">
                <div class="flex flex-wrap items-center gap-4">
                    <!-- Search -->
                    <div class="flex-1 min-w-[300px]">
                        <div class="relative">
                            <i data-lucide="search"
                                class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
                            <input type="text" id="searchInput" placeholder="Rechercher par client, projet, secteur..."
                                class="w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary">
                        </div>
                    </div>

                    <!-- Status Filter -->
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-gray-500">Statut:</span>
                        <button onclick="filterByStatus('all')"
                            class="filter-btn active px-3 py-1.5 rounded-lg text-sm font-medium border border-gray-200 cursor-pointer"
                            data-status="all">Tous</button>
                        <button onclick="filterByStatus('go')"
                            class="filter-btn px-3 py-1.5 rounded-lg text-sm font-medium border border-gray-200 cursor-pointer"
                            data-status="go">GO</button>
                        <button onclick="filterByStatus('review')"
                            class="filter-btn px-3 py-1.5 rounded-lg text-sm font-medium border border-gray-200 cursor-pointer"
                            data-status="review">À Évaluer</button>
                        <button onclick="filterByStatus('nogo')"
                            class="filter-btn px-3 py-1.5 rounded-lg text-sm font-medium border border-gray-200 cursor-pointer"
                            data-status="nogo">NO-GO</button>
                    </div>

                    <!-- Sort -->
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-gray-500">Trier:</span>
                        <select id="sortSelect" onchange="sortPipeline()"
                            class="border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 cursor-pointer">
                            <option value="deadline">Deadline ↑</option>
                            <option value="score">Score ↓</option>
                            <option value="value">Valeur ↓</option>
                            <option value="progress">Progression ↓</option>
                        </select>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="flex items-center gap-6 mt-4 pt-4 border-t border-gray-100">
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                        <span class="text-sm text-gray-600"><strong id="countGo">7</strong> GO Recommandés</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
                        <span class="text-sm text-gray-600"><strong id="countReview">3</strong> À Évaluer</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                        <span class="text-sm text-gray-600"><strong id="countNogo">2</strong> NO-GO</span>
                    </div>
                    <div class="ml-auto text-sm text-gray-500">
                        Valeur totale pipeline: <strong class="text-brand-dark">24.8M€</strong>
                    </div>
                </div>
            </div>

            <!-- Pipeline Grid -->
            <div id="pipelineGrid" class="grid gap-4">
                <!-- AO Cards will be rendered here by JS -->
            </div>
        </main>
    </div>

    <script>
        lucide.createIcons();

        // Sample data - représente les AO du pipeline
        const pipelineData = [
            {
                id: 'ao1',
                title: 'Transformation SI Retail',
                client: 'Carrefour France',
                sector: 'Retail / GMS',
                value: 2400000,
                deadline: '2026-02-15',
                score: 8.6,
                status: 'go',
                progress: 65,
                statusLabel: 'GO Recommandé',
                statusColor: 'green',
                daysLeft: 11
            },
            {
                id: 'ao2',
                title: 'Migration Cloud Souverain',
                client: 'BNP Paribas',
                sector: 'Banque / Finance',
                value: 4800000,
                deadline: '2026-02-22',
                score: 9.1,
                status: 'go',
                progress: 40,
                statusLabel: 'GO Recommandé',
                statusColor: 'green',
                daysLeft: 18
            },
            {
                id: 'ao3',
                title: 'Plateforme Data Analytics',
                client: 'TotalEnergies',
                sector: 'Énergie',
                value: 1200000,
                deadline: '2026-02-28',
                score: 6.4,
                status: 'review',
                progress: 15,
                statusLabel: 'À Évaluer',
                statusColor: 'yellow',
                daysLeft: 24
            },
            {
                id: 'ao4',
                title: 'Modernisation ERP',
                client: 'Société Générale',
                sector: 'Banque / Finance',
                value: 3200000,
                deadline: '2026-02-10',
                score: 4.2,
                status: 'nogo',
                progress: 10,
                statusLabel: 'NO-GO Suggéré',
                statusColor: 'red',
                daysLeft: 6
            },
            {
                id: 'ao5',
                title: 'Cybersécurité Zero Trust',
                client: 'Airbus Defence',
                sector: 'Aéronautique / Défense',
                value: 5600000,
                deadline: '2026-03-01',
                score: 8.9,
                status: 'go',
                progress: 25,
                statusLabel: 'GO Recommandé',
                statusColor: 'green',
                daysLeft: 25
            },
            {
                id: 'ao6',
                title: 'Refonte Portail Client',
                client: 'AXA France',
                sector: 'Assurance',
                value: 1800000,
                deadline: '2026-02-20',
                score: 7.8,
                status: 'go',
                progress: 55,
                statusLabel: 'GO Recommandé',
                statusColor: 'green',
                daysLeft: 16
            },
            {
                id: 'ao7',
                title: 'IA Générative RH',
                client: 'L\'Oréal',
                sector: 'Cosmétiques / Luxe',
                value: 950000,
                deadline: '2026-03-05',
                score: 8.2,
                status: 'go',
                progress: 20,
                statusLabel: 'GO Recommandé',
                statusColor: 'green',
                daysLeft: 29
            },
            {
                id: 'ao8',
                title: 'Système de Gestion Logistique',
                client: 'Geodis',
                sector: 'Transport / Logistique',
                value: 2100000,
                deadline: '2026-02-25',
                score: 5.8,
                status: 'review',
                progress: 8,
                statusLabel: 'À Évaluer',
                statusColor: 'yellow',
                daysLeft: 21
            },
            {
                id: 'ao9',
                title: 'Blockchain Supply Chain',
                client: 'Renault Group',
                sector: 'Automobile',
                value: 3500000,
                deadline: '2026-02-18',
                score: 3.9,
                status: 'nogo',
                progress: 5,
                statusLabel: 'NO-GO Suggéré',
                statusColor: 'red',
                daysLeft: 14
            },
            {
                id: 'ao10',
                title: 'Plateforme IoT Industrielle',
                client: 'Schneider Electric',
                sector: 'Industrie',
                value: 2800000,
                deadline: '2026-03-10',
                score: 8.5,
                status: 'go',
                progress: 12,
                statusLabel: 'GO Recommandé',
                statusColor: 'green',
                daysLeft: 34
            },
            {
                id: 'ao11',
                title: 'Transformation Digitale Agences',
                client: 'Crédit Agricole',
                sector: 'Banque / Finance',
                value: 4200000,
                deadline: '2026-03-15',
                score: 7.2,
                status: 'review',
                progress: 5,
                statusLabel: 'À Évaluer',
                statusColor: 'yellow',
                daysLeft: 39
            },
            {
                id: 'ao12',
                title: 'Système de Réservation Next-Gen',
                client: 'Accor Hotels',
                sector: 'Hôtellerie / Tourisme',
                value: 1600000,
                deadline: '2026-02-28',
                score: 8.0,
                status: 'go',
                progress: 30,
                statusLabel: 'GO Recommandé',
                statusColor: 'green',
                daysLeft: 24
            }
        ];

        let currentFilter = 'all';
        let currentSort = 'deadline';

        function formatCurrency(value) {
            if (value >= 1000000) {
                return (value / 1000000).toFixed(1) + 'M€';
            }
            return (value / 1000).toFixed(0) + 'k€';
        }

        function getScoreColor(score) {
            if (score >= 7.5) return 'text-brand-accent';
            if (score >= 5) return 'text-brand-warning';
            return 'text-brand-danger';
        }

        function renderPipeline(data) {
            const grid = document.getElementById('pipelineGrid');
            grid.innerHTML = data.map(ao => `
                <div class="ao-card bg-white rounded-xl p-6 shadow-sm border border-gray-100 card-hover cursor-pointer" 
                     data-status="${ao.status}" onclick="window.location.href='dashboard.html'">
                    <div class="flex items-center gap-6">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-2">
                                <h3 class="font-semibold text-lg">${ao.title}</h3>
                                <span class="bg-${ao.statusColor}-100 text-${ao.statusColor}-700 text-xs font-medium px-2.5 py-1 rounded-full">${ao.statusLabel}</span>
                            </div>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <span class="flex items-center gap-1">
                                    <i data-lucide="building" class="w-4 h-4"></i>
                                    ${ao.client}
                                </span>
                                <span class="flex items-center gap-1">
                                    <i data-lucide="tag" class="w-4 h-4"></i>
                                    ${ao.sector}
                                </span>
                                <span class="flex items-center gap-1">
                                    <i data-lucide="euro" class="w-4 h-4"></i>
                                    ${formatCurrency(ao.value)}
                                </span>
                                <span class="flex items-center gap-1 ${ao.daysLeft <= 7 ? 'text-red-500 font-medium' : ''}">
                                    <i data-lucide="calendar" class="w-4 h-4"></i>
                                    ${ao.daysLeft <= 7 ? '⚠️ ' : ''}${ao.daysLeft}j restants
                                </span>
                            </div>
                        </div>
                        <div class="text-right min-w-[80px]">
                            <div class="text-2xl font-bold ${getScoreColor(ao.score)}">${ao.score}/10</div>
                            <div class="text-xs text-gray-500">Score</div>
                        </div>
                        <div class="w-24">
                            <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="progress-bar h-full rounded-full" style="width: ${ao.progress}%"></div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1 text-center">${ao.progress}%</div>
                        </div>
                        <i data-lucide="chevron-right" class="w-5 h-5 text-gray-400"></i>
                    </div>
                </div>
            `).join('');

            // Refresh icons
            lucide.createIcons();
        }

        function filterByStatus(status) {
            currentFilter = status;

            // Update button styles
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.status === status) {
                    btn.classList.add('active');
                }
            });

            applyFiltersAndSort();
        }

        function sortPipeline() {
            currentSort = document.getElementById('sortSelect').value;
            applyFiltersAndSort();
        }

        function applyFiltersAndSort() {
            let filteredData = [...pipelineData];

            // Apply status filter
            if (currentFilter !== 'all') {
                filteredData = filteredData.filter(ao => ao.status === currentFilter);
            }

            // Apply search
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (searchTerm) {
                filteredData = filteredData.filter(ao =>
                    ao.title.toLowerCase().includes(searchTerm) ||
                    ao.client.toLowerCase().includes(searchTerm) ||
                    ao.sector.toLowerCase().includes(searchTerm)
                );
            }

            // Apply sort
            switch (currentSort) {
                case 'deadline':
                    filteredData.sort((a, b) => a.daysLeft - b.daysLeft);
                    break;
                case 'score':
                    filteredData.sort((a, b) => b.score - a.score);
                    break;
                case 'value':
                    filteredData.sort((a, b) => b.value - a.value);
                    break;
                case 'progress':
                    filteredData.sort((a, b) => b.progress - a.progress);
                    break;
            }

            renderPipeline(filteredData);
            updateCounts();
        }

        function updateCounts() {
            document.getElementById('countGo').textContent = pipelineData.filter(ao => ao.status === 'go').length;
            document.getElementById('countReview').textContent = pipelineData.filter(ao => ao.status === 'review').length;
            document.getElementById('countNogo').textContent = pipelineData.filter(ao => ao.status === 'nogo').length;
        }

        // Initialize
        document.getElementById('searchInput').addEventListener('input', applyFiltersAndSort);
        renderPipeline(pipelineData);
        updateCounts();
    </script>
</body>

</html>